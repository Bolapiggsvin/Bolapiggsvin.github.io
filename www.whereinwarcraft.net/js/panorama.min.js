class Panorama{constructor(s){this.ui=s,this.isClassic=!1,this.offset=0,this.anchor=0,this.isDragging=!1,this._init()}setMode(s){this.isClassic=s}setLocation(s){const i=this.isClassic?"locations_classic":"locations";this.ui.$gameCanvas.css({opacity:0}),this.ui.$gameCanvas.loadBackgroundSmooth("images/"+i+"/"+s+".jpg")}_init(){this.ui.$gameImage.on("mousedown touchstart",s=>this._onMouseDown(s)),$(document).on("mousemove touchmove",s=>this._onMouseMove(s)).on("mouseup touchend touchcancel",s=>this._onMouseUp(s))}_onMouseMove(s){if(this.isDragging){let i=s.clientX||s.touches[0].clientX,t=this.offset+(i-this.anchor);this.ui.$gameCanvas.css("background-position-x",t+"px"),s.preventDefault()}}_onMouseDown(s){this.anchor=s.clientX||s.touches[0].clientX,this.isDragging=!0,s.preventDefault()}_onMouseUp(s){if(this.isDragging){let i=s.clientX||s.changedTouches[0].clientX;this.isDragging=!1,this.offset=this.offset+(i-this.anchor),s.preventDefault()}}}